<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smooth Liquid Cutout</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
      #card-shape {
        will-change: clip-path;
      }
      body {
        background-color: #e2e8f0;
        background-image: radial-gradient(#94a3b8 2px, transparent 2px);
        background-size: 24px 24px;
      }
    </style>
  </head>
  <body
    class="min-h-screen flex items-center justify-center p-8 font-sans antialiased text-slate-900"
  >
    <div class="relative w-full max-w-sm md:max-w-md group">
      <!-- THE CARD -->
      <div
        id="card-shape"
        class="relative h-[520px] w-full bg-indigo-600 hover:bg-indigo-700 transition-colors duration-300 z-10 shadow-2xl"
      >
        <div class="absolute inset-0 p-8 flex flex-col">
          <h2 class="text-3xl font-bold text-white tracking-tight">
            UI/UX Design
          </h2>
          <p
            class="text-indigo-200 text-sm mt-1 mb-8 font-medium tracking-wide"
          >
            Mobile Application Project
          </p>

          <div
            class="flex-1 relative w-full rounded-3xl overflow-hidden border-2 border-white/10 bg-white/10 backdrop-blur-md shadow-[inset_0_0_20px_rgba(255,255,255,0.05)]"
          >
            <div
              class="absolute -top-10 -left-10 w-48 h-48 bg-purple-500/30 rounded-full blur-3xl mix-blend-screen"
            ></div>
            <div
              class="absolute bottom-20 -right-10 w-40 h-40 bg-blue-500/30 rounded-full blur-2xl mix-blend-screen"
            ></div>

            <div
              class="absolute bottom-0 left-1/2 -translate-x-1/2 w-40 h-[90%] bg-slate-900 rounded-t-[2.5rem] border-x-[6px] border-t-[6px] border-slate-800 shadow-2xl flex flex-col items-center pt-4 overflow-hidden"
            >
              <div
                class="w-12 h-4 bg-black rounded-full mb-4 z-20 shadow-sm"
              ></div>
              <div class="w-full h-full bg-slate-800 relative px-3 space-y-3">
                <div class="w-full h-24 bg-slate-700/50 rounded-2xl"></div>
                <div class="w-3/4 h-4 bg-slate-700/30 rounded-full"></div>
                <div class="w-1/2 h-4 bg-slate-700/30 rounded-full"></div>
                <div
                  class="w-full h-32 bg-indigo-500/10 rounded-2xl border border-white/5 mt-4"
                ></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- FLOATING BUTTON (80px size -> Radius 40px) -->
      <div class="absolute bottom-0 right-0 z-20 filter drop-shadow-xl">
        <button
          class="w-20 h-20 bg-white rounded-full flex items-center justify-center text-indigo-900 hover:scale-105 hover:bg-indigo-50 active:scale-95 transition-all duration-300 cursor-pointer group-hover:shadow-2xl"
        >
          <i data-lucide="arrow-up-right" class="w-8 h-8 stroke-[2.5]"></i>
        </button>
      </div>
    </div>

    <script>
      lucide.createIcons();

      const card = document.getElementById("card-shape");

      // --- CONFIGURATION ---
      const cornerRadius = 32; // Standard card corners
      const buttonRadius = 40; // The button is w-20 (80px) -> r=40
      const gap = 20; // User requested "20px bigger radius"
      const cutoutRadius = buttonRadius + gap; // 60px
      const filletRadius = 20; // Smooth rounding into the cutout

      function updateClipPath() {
        const rect = card.getBoundingClientRect();
        const w = rect.width;
        const h = rect.height;

        if (w === 0 || h === 0) return;

        /* MATH LOGIC:
               The Button is centered at (W - 40, H - 40).
               The Cutout is a circle centered at exactly that same point (W - 40, H - 40).
               We need to find the tangent circles (fillets) that connect the straight 
               card edges to this specific cutout circle.
            */

        // Center of the Cutout Circle
        const cx_cut = w - buttonRadius;
        const cy_cut = h - buttonRadius;

        // 1. Calculate Vertical Fillet Center (Right Edge)
        // The fillet circle center (cx_f1, cy_f1) is:
        //   - distance 'filletRadius' from right edge (x=W)
        //   - distance 'filletRadius + cutoutRadius' from Cutout Center
        const cx_f1 = w - filletRadius;

        // Solve for cy_f1:
        // dist^2 = (dx)^2 + (dy)^2
        // (cutoutRadius + filletRadius)^2 = (cx_cut - cx_f1)^2 + (cy_cut - cy_f1)^2
        const hypotenuse = cutoutRadius + filletRadius;
        const dx1 = cx_cut - cx_f1; // This will be negative
        const dy1_sq = Math.pow(hypotenuse, 2) - Math.pow(dx1, 2);
        const dy1 = Math.sqrt(dy1_sq);
        const cy_f1 = cy_cut - dy1; // Center is above the cutout

        // 2. Calculate Horizontal Fillet Center (Bottom Edge)
        // Symmetrical logic
        const cy_f2 = h - filletRadius;
        const dy2 = cy_cut - cy_f2;
        const dx2_sq = Math.pow(hypotenuse, 2) - Math.pow(dy2, 2);
        const dx2 = Math.sqrt(dx2_sq);
        const cx_f2 = cx_cut - dx2; // Center is left of the cutout

        // 3. Calculate Start/End Points for Arcs

        // Point A: Start of Vertical Fillet (on Edge)
        // x = w, y = cy_f1

        // Point B: Intersection of Vertical Fillet & Cutout
        // We use vector interpolation between the two centers
        const t = filletRadius / hypotenuse;
        const bx = cx_f1 + t * (cx_cut - cx_f1);
        const by = cy_f1 + t * (cy_cut - cy_f1);

        // Point C: Intersection of Cutout & Horizontal Fillet
        const cx = cx_f2 + t * (cx_cut - cx_f2);
        const cy = cy_f2 + t * (cy_cut - cy_f2);

        // Point D: End of Horizontal Fillet (on Bottom Edge)
        // x = cx_f2, y = h

        const path = `
                M ${cornerRadius},0
                L ${w - cornerRadius},0
                A ${cornerRadius},${cornerRadius} 0 0 1 ${w},${cornerRadius}
                
                L ${w},${cy_f1}
                A ${filletRadius},${filletRadius} 0 0 1 ${bx},${by}
                A ${cutoutRadius},${cutoutRadius} 0 0 0 ${cx},${cy}
                A ${filletRadius},${filletRadius} 0 0 1 ${cx_f2},${h}
                
                L ${cornerRadius},${h}
                A ${cornerRadius},${cornerRadius} 0 0 1 0,${h - cornerRadius}
                L 0,${cornerRadius}
                A ${cornerRadius},${cornerRadius} 0 0 1 ${cornerRadius},0
                Z
            `;

        card.style.clipPath = `path('${path.replace(/\s+/g, " ").trim()}')`;
      }

      const observer = new ResizeObserver(() => {
        window.requestAnimationFrame(updateClipPath);
      });

      observer.observe(card);
      updateClipPath();
    </script>
  </body>
</html>
